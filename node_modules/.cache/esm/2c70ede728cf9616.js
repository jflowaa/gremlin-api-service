let express,cors,GremlinClient;_28c‍.w("express",[["default",["express"],function(v){express=v}]]);_28c‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_28c‍.w("./GremlinClient",[["default",["GremlinClient"],function(v){GremlinClient=v}]]);



const app = express();
const gremlinClient = new GremlinClient();
app.use(cors());
app.use(express.json());

app.get("/", async (req, res) => {
  const query = "g.V()";
  const response = await gremlinClient.runQuery(query);
  res.send(response);
});

app.post("/", async (req, res) => {
  const query =
    "g.addV('user').property('name', 'this guy').property('age', 69)";
  const response = await gremlinClient.runQuery(query);
  res.send(response);
});

app.put("/", async (req, res) => {
  const vertex = await gremlinClient.runQuery(`g.V(${req.body.id})`);
  if (!vertex) {
    res.send("Vertex not found");
  }
  await gremlinClient.updateVertex(vertex, req.body);
  res.send("yes");
});

app.listen(3001, () => console.log("Running on: http://localhost:3001/"));
